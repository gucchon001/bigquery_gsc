# 機能要件仕様書

### 1. システム概要
- プログラムの全体的な目的と対象のユーザー
  - このプログラムは、Pythonプロジェクト内のソースコードファイルを収集し、その内容をマージして仕様書を生成するためのツールです。仕様書はOpenAIのモデルを使用して生成されます。このツールは、コードの仕様を文書化したい開発者やプロジェクトマネージャー向けに設計されています。プログラムは特にAIを使用した自動化されたドキュメント生成に重点を置いています。

### 2. 主要機能要件
- 提供される各機能の説明
  - **SpecificationGeneratorクラス**:
    - 仕様書を生成するための主要なクラス。OpenAIのAPIを使用して、コード内容をもとに仕様書を生成します。
    - `generate()`メソッド: プロンプトとコードを結合してAIに送り、生成された仕様書をファイルに保存します。
    - `_read_merge_file()`メソッド: マージされたコードファイルを読み込みます。
    - `_read_prompt_file()`メソッド: 仕様書生成に使用するプロンプトを読み込みます。
  
  - **PythonFileMergerクラス**:
    - Pythonファイルをマージする機能を提供。指定されたディレクトリからPythonファイルを収集し、フォルダ構造とファイル内容を統合したファイルを生成します。
    - `_collect_python_files()`メソッド: 指定されたディレクトリからPythonファイルを収集します。
    - `_merge_files_content()`メソッド: 収集したファイルの内容をマージします。
  
  - **環境設定とログ管理**:
    - 環境変数や設定ファイルからの情報取得をサポートするユーティリティクラスが用意されています。
    - ログ設定が包括的に管理されており、アプリケーションの動作を記録します。

### 3. 非機能要件
- パフォーマンス
  - 仕様書生成はAIモデルを使用するため、ネットワークの速度やAPIの応答時間に依存します。
  
- セキュリティ
  - OpenAI APIキーのセキュリティが重要。環境変数や設定ファイルで管理されており、公開されないように注意が必要です。
  
- 可用性
  - エラーログが詳細に記録されており、問題発生時のトラブルシューティングがしやすい構造になっています。

### 4. 技術要件
- 開発環境
  - Python 3.x（3.6以上推奨）
  - 利用ライブラリ: dotenv, icecream, anytree, openaiなど
  
- システム環境
  - OS: クロスプラットフォーム（Windows, macOS, Linuxで動作可能）
  
- 必要なライブラリ
  - `requirements.txt`で指定されたPythonパッケージが必要です。特に、OpenAI APIを使用するために`openai`ライブラリが必要です。